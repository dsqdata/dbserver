webpackJsonp([20],{wHw1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("WT6e"),r=function(){},d=n("NOoU"),o=n("YaPU"),a=n("TToO");o.a.throw=function(t){function e(e,n){t.call(this),this.error=e,this.scheduler=n}return Object(a.__extends)(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){t.subscriber.error(t.error)},e.prototype._subscribe=function(t){var n=this.error,i=this.scheduler;if(t.syncErrorThrowable=!0,i)return i.schedule(e.dispatch,0,{error:n,subscriber:t});t.error(n)},e}(o.a).create,n("owTz"),n("xgm2");var l=n("ItHS"),g=function(){function t(t){this.http=t,this.jsonRequestOptions=new d.g({headers:new d.c({"Content-Type":"application/json"})})}return t.prototype.addDataById=function(t,e){return this.http.post(t,{model:e})},t.prototype.updDataById=function(t,e){return this.http.put(t,{model:e})},t.prototype.delDataById=function(t,e){return this.http.delete(t+"/"+e)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e=t.json(),n="string"==typeof e?e:e.errmsg?e.errmsg:t.status?t.status+" - "+t.statusText:"Server error";return console.error(n),o.a.throw(n)},t}(),s=function(){function t(t,e,n){this.elementRef=t,this.viewContainerRef=e,this.service=n,this.getNgGrid=new i.EventEmitter,this.clickGrid=new i.EventEmitter}return t.prototype.returnNgGrid=function(){this.getNgGrid.emit(this.ngGrid)},t.prototype.processOp=function(){var t=this.elementRef.nativeElement.id+"Grid",e=this,n={base:{styleUI:"Bootstrap",loadBeforeSend:function(t,e){t.setRequestHeader("x-access-token",window.localStorage.auth_app_token)},ajaxRowOptions:{beforeSend:function(t,e){t.setRequestHeader("x-access-token",window.localStorage.auth_app_token)}},beforeSelectRow:function(e,n){return!$("#"+t+" tr[editable='1']")[0]||$("#"+t+" tr[editable='1']")[0].id===e||(layer.msg("\u8bf7\u4fdd\u5b58\u5f53\u524d\u7f16\u8f91\u7684\u6570\u636e"),!1)},gridComplete:function(){$("#"+t+"_norecords").remove();var n=$("#"+t).getGridParam("records");if((0===n||null==n)&&null==$("#"+t+"_norecords").html()){var i='<div id="'+t+'_norecords" class="alert alert-warning" style="margin:15px;" align="center">\u6ca1\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u6570\u636e</div>';$(this).parent().append(i)}$(e.$gridId).jqGrid("getGridParam","girdCompleteFun")()},girdCompleteFun:function(){},viewsortcols:[!0,"vertical",!0],toppager:!0,toolbar:[!1,"top"],mtype:"POST",shrinkToFit:!1,height:"100%",loadtext:"\u6b63\u5728\u73a9\u547d\u52a0\u8f7d\u6570\u636e\u4e2d......",emptyrecords:"\u6ca1\u6709\u6570\u636e",autowidth:!0,postData:{},rowNum:10,rownumbers:!0,viewrecords:!0,rowList:[10,30,50],datatype:"json",pager:"#"+t+"Pager"},initdata:{},extraparam:{},filterToolbarFlag:!0,btn:{editurl:"",del:{flag:!1},add:{flag:!1},edt:{flag:!1},exc:{flag:!1},save:{flag:!1},cancel:{flag:!1},view:{flag:!1}},btncus:[]};return console.log(e.gridSetting),$.extend(!0,n,e.gridSetting)},t.prototype.processBtn=function(){var t=this,e=$(t.$gridId).jqGrid("navGrid",this.$pagerId,{edit:!1,add:!1,del:!1,search:!1,refresh:!1,view:!1,cloneToTop:!0});if(t.ngSetting.btn.del.flag){var n={caption:"",title:"\u5220\u9664",id:t.gridId+"_del",buttonicon:"glyphicon-trash red",onClickButton:function(){t.deleteRow()},position:"first"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,n),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,n)}if(t.ngSetting.btn.cancel.flag){var i={caption:"",title:"\u53d6\u6d88",id:t.gridId+"_cancel",buttonicon:"fa fa-repeat blue",onClickButton:function(){t.ngGrid.trigger("reloadGrid")},position:"first"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,i),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,i)}if(t.ngSetting.btn.save.flag){var r={caption:"",title:"\u4fdd\u5b58",id:t.gridId+"_save",buttonicon:"fa fa-save blue",onClickButton:function(){t.saveRow()},position:"first"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,r),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,r)}if(t.ngSetting.btn.edt.flag){var d={caption:"",title:"\u7f16\u8f91",id:t.gridId+"_edt",buttonicon:"glyphicon-edit blue",onClickButton:function(){t.editRow()},position:"first"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,d),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,d)}if(t.ngSetting.btn.add.flag){var o={caption:"",id:t.gridId+"_add",title:"\u65b0\u589e",buttonicon:"glyphicon-plus blue",onClickButton:function(){t.addRow()},position:"first"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,o),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,o)}if(t.ngSetting.btn.view.flag){var a={caption:"",id:t.gridId+"_view",title:"\u67e5\u770b",buttonicon:"glyphicon-info-sign blue",onClickButton:function(){alert("\u67e5\u770b\u5904\u7406")},position:"first"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,a),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,a)}if((t.ngSetting.btn.add.flag||t.ngSetting.btn.edt.flag||t.ngSetting.btn.save.flag||t.ngSetting.btn.view.flag||t.ngSetting.btn.del.flag||t.ngSetting.btn.cancel.flag)&&(e.navSeparatorAdd(this.$pagerId,{}),t.ngGrid.jqGrid("navSeparatorAdd",t.$pagerTopId,{})),t.ngSetting.btn.exc.flag){var l={caption:"",title:"\u5bfc\u51fa",buttonicon:"fa fa-file-excel-o green",onClickButton:function(){if(t.ngSetting.btn.exc.url){var e=JSON.stringify(t.ngGrid.getGridParam("postData"));$("<iframe/>").attr({src:t.ngSetting.btn.exc.url+"?postData="+e,style:"visibility:hidden;display:none;"}).appendTo("body")}else layer.msg("\u672a\u914d\u7f6e\u5bfc\u51fa\u8def\u5f84\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458")},position:"last"};e.navButtonAdd(t.$pagerId,l),e.navSeparatorAdd(this.$pagerId,{}),t.ngSetting.base.toppager&&(t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,l),t.ngGrid.jqGrid("navSeparatorAdd",t.$pagerTopId,{}))}var g={caption:"",title:"\u5237\u65b0",buttonicon:"glyphicon-refresh",onClickButton:function(){t.ngGrid.trigger("reloadGrid")},position:"last"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,g),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,g);var s={caption:"",title:"\u6536\u7f29\u663e\u793a\u6a21\u5f0f",buttonicon:"glyphicon-indent-right",onClickButton:function(){var e=t.ngGrid.jqGrid("getGridParam","width");t.ngGrid.jqGrid("destroyFrozenColumns"),t.ngGrid.jqGrid("setGridWidth",e,!0)},position:"last"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,s),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,s);var c={caption:"",title:"\u9009\u62e9\u663e\u793a\u5217",buttonicon:"glyphicon-filter",onClickButton:function(){for(var e=t.ngGrid.jqGrid("getGridParam","colModel"),n="",i=0;i<e.length;i++){var r=e[i].name;if("rn"!==r&&"_id"!==r){var d=e[i].label;n=e[i].hidden?n+'<div class="custom-control custom-checkbox"><input type="checkbox" class="ng-grid-clc form-check-input" id="'+r+'_cl" ng-grid-cl="'+r+'" onclick="clClick(this)"><label class="form-check-label" for="exampleCheck1">'+d+"</label></div>":n+'<div class="custom-control custom-checkbox"><input type="checkbox" checked="checked" class="ng-grid-clc form-check-input" id="'+r+'_cl" ng-grid-cl="'+r+'" onclick="clClick(this)"><label class="form-check-label" for="exampleCheck1">'+d+"</label></div>"}}layer.open({type:1,area:["250px","340px"],title:"\u9009\u53d6\u663e\u793a\u5217",offset:"auto",id:"layerDemo",content:'<div class="container"><script>function clClick (t) {var checked = $(t).is(\':checked\');var name = $(t).attr("ng-grid-cl");if(checked){$("'+t.$gridId+'").setGridParam().showCol(name).trigger("reloadGrid");} else {$("'+t.$gridId+'").setGridParam().hideCol(name).trigger("reloadGrid");}; $("'+t.$gridId+'").setGridWidth($("'+t.$wapperId+'").width());}<\/script>'+n+"</div>",shade:.2})},position:"last"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,c),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,c),t.ngSetting.btncus.length>0&&t.ngSetting.btncus.forEach(function(e){var n={caption:e.caption,title:e.title,buttonicon:e.buttonicon,onClickButton:e.clickFun,position:"last"};t.ngGrid.jqGrid("navButtonAdd",t.$pagerId,n),t.ngSetting.base.toppager&&t.ngGrid.jqGrid("navButtonAdd",t.$pagerTopId,n)}),t.ngSetting.base.toppager&&($(t.$gridId+"_toppager_center").hide(),$(t.$gridId+"_toppager_right").hide(),$(t.$gridId+"_toppager_left").css("float","right"))},t.prototype.processFind=function(){var t=this.ngSetting,e=this.ngGrid;t.filterToolbarFlag&&e.jqGrid("filterToolbar",{beforeSearch:function(){var n=e.jqGrid("getGridParam","postData");n.filterTool||(n.filterTool={}),n.filterTool.$and=[],n.extendTool||(n.extendTool={}),$.each(t.base.colModel,function(t,e){var i=n[e.name],r=e.ctype||"text",d={};i&&(r&&"text"===r?(d[e.name]={$regex:i,$options:"i"},n.filterTool.$and.push(d)):r&&"select"===r?(d[e.name]=i,n.filterTool.$and.push(d)):r&&"date"===r?(d[e.name]={$gte:i},n.filterTool.$and.push(d)):r&&"account"===r?/^[0-9]+.?[0-9]*$/.test(i)&&(d[e.name]=100*i,n.filterTool.$and.push(d)):r&&"number"===r?/^(\-|\+)?\d+(\.\d+)?$/.test(i)?(d[e.name]=i,n.filterTool.$and.push(d)):n.extendTool[e.name]=i:r&&"extend"===r&&(n.extendTool[e.name]=i))})}})},t.prototype.deleteRow=function(){var t=this.ngGrid.jqGrid("getGridParam","selrow"),e=this;e.ngSetting.btn.editurl&&""!==e.ngSetting.btn.editurl?t?layer.confirm("\u662f\u5426\u5220\u9664\u6570\u636e\uff1f",{btn:["\u786e\u5b9a","\u53d6\u6d88"]},function(){e.service.delDataById(e.ngSetting.btn.editurl,t).subscribe(function(t){layer.msg("\u5220\u9664\u6210\u529f"),e.ngGrid.trigger("reloadGrid")},function(t){layer.msg(t)})},function(){layer.msg("\u53d6\u6d88\u5220\u9664\u64cd\u4f5c")}):layer.msg("\u8bf7\u9009\u5219\u4e00\u884c\u6570\u636e"):layer.msg("\u672a\u914d\u7f6e\u8def\u5f84\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458")},t.prototype.addRow=function(){var t=this.ngGrid.jqGrid("getRowData","new_row");$.isEmptyObject(t)?(this.ngGrid.jqGrid("addRow",{rowID:"new_row",initdata:this.ngSetting.initdata,position:"first",useDefValues:!0,useFormatter:!0,addRowParams:{extraparam:this.ngSetting.extraparam}}),this.ngGrid.jqGrid("editRow","new_row",!0,null),$(this.$gridId+"_edt,"+this.$gridId+"_add,"+this.$gridId+"_del").attr("disabled","disabled"),this.ngSetting.afterEditRow&&this.ngSetting.afterEditRow("new_row")):layer.msg("\u8bf7\u4fdd\u5b58\u5f53\u524d\u7f16\u8f91\u7684\u6570\u636e")},t.prototype.saveRow=function(){var t=this.ngGrid.jqGrid("getRowData","new_row");if($.isEmptyObject(t)){var e=this.ngGrid.jqGrid("getGridParam","selrow");e?this.subSaveRow(e):layer.msg("\u6ca1\u6709\u9700\u8981\u4fdd\u5b58\u7684\u6570\u636e")}else this.subSaveRow("new_row")},t.prototype.subSaveRow=function(t){var e=this;this.ngGrid.saveRow(t,function(t){layer.msg("\u6570\u636e\u4fdd\u5b58\u6210\u529f"),$(e.$gridId+"_add,"+e.$gridId+"_edt,"+e.$gridId+"_del").removeAttr("disabled"),e.ngGrid.trigger("reloadGrid")},this.ngSetting.btn.editurl,{},null,function(t,e){layer.msg("\u6570\u636e\u5b58\u50a8\u5931\u8d25.")},null)},t.prototype.editRow=function(){"1"===$(this.$gridId+">.ui-row-lt").attr("editable")&&layer.msg("\u8bf7\u4fdd\u5b58\u5f53\u524d\u7f16\u8f91\u7684\u6570\u636e");var t=this.ngGrid.jqGrid("getGridParam","selarrrow");t&&t.length>1&&layer.msg("\u53ea\u80fd\u9009\u62e9\u4e00\u6761\u9700\u8981\u7f16\u8f91\u7684\u6570\u636e");var e=this.ngGrid.jqGrid("getGridParam","selrow");e||layer.msg("\u8bf7\u9009\u62e9\u9700\u8981\u7f16\u8f91\u7684\u6570\u636e"),this.ngGrid.jqGrid("editRow",e,!0,null),$(this.$gridId+"_edt,"+this.$gridId+"_add,"+this.$gridId+"_del").attr("disabled","disabled")},t.prototype.refloadGrid=function(){this.ngGrid.trigger("reloadGrid")},t.prototype.ngOnInit=function(){this.ngSetting=this.processOp(),this.wapperId=this.elementRef.nativeElement.id,this.$wapperId="#"+this.wapperId,this.gridId=this.wapperId+"Grid",this.$gridId="#"+this.gridId,this.pagerId=this.gridId+"Pager",this.$pagerId="#"+this.pagerId,this.$pagerTopId="#"+this.gridId+"_toppager",this.$toolbarId="#t_"+this.gridId,$(this.elementRef.nativeElement).append('<table id="'+this.gridId+'"></table><div id="'+this.pagerId+'"></div>');var t=this.elementRef.nativeElement.querySelector("table");console.log(this.ngSetting),this.ngGrid=$(t).jqGrid(this.ngSetting.base),this.returnNgGrid();var e=this;this.processBtn(),this.processFind(),$(window).bind("resize",function(){$(e.$gridId).setGridWidth($(e.$wapperId).width())})},t.prototype.toggleOpen=function(t){var e=$(t.target);if(e.hasClass("ng-grid-clc"));else{var n=e.attr("ng-grid-rowid"),i=e.attr("ng-grid-method"),r=e.attr("ng-grid-extend")?e.attr("ng-grid-extend"):"";if(!n&&!i&&"undefined"!==n&&"undefined"!==i)return;var d=this.ngGrid.jqGrid("getRowData",n);this.clickGrid.emit({gridId:this.gridId,methodName:i,rowData:d,extend:r})}},t}(),c=function(t){function e(){var e=t.call(this)||this;return e.gridSetting={base:{url:"http://trirand.com/blog/phpjqgrid/examples/jsonp/getjsonp.php?callback=?&qwery=longorders",colModel:[{label:"ID",name:"_id",key:!0,width:75,hidden:!0},{label:"\u7528\u6237\u540d",name:"userName",width:150},{label:"\u7528\u6237\u7c7b\u578b",name:"userType",width:150,formatter:qsGrid.commonFormatter,stype:"select",ctype:"select",searchoptions:{value:":\u5168\u90e8;dc:\u533b\u62a4;pa:\u60a3\u8005"}},{label:"\u72b6\u6001",name:"status",width:150,hidden:!0},{label:"\u5185\u5bb9",name:"content",width:300},{label:"\u521b\u5efa\u65f6\u95f4",name:"createdOn",width:150,formatter:qsGrid.amountDateFormatter,ctype:"date",searchoptions:{dataInit:function(t){qsGrid.dateDataInit(t)}}},{label:"\u56fe\u7247",name:"imgList",width:150,search:!1,sortable:!1,formatter:function(t,e,n){var i="";return t.forEach(function(t){var e=t.replace("client","").replace(/\\/g,"/");i=i+'<img class="opinion-img" style="height: 32px;width: 32px;" src="'+e+'">'}),i}}],shrinkToFit:!0,multiselect:!1,sidx:"createdOn",sortorder:"desc",girdCompleteFun:function(){$(".opinion-img").click(function(){layer.open({type:1,title:"\u56fe\u7247\u8be6\u60c5",area:["820px","440px"],content:'<div style="padding: 3px 5px"><img src=\''+this.src+"'></div>"})})}},btn:{editurl:"",view:{flag:!1},save:{flag:!1},add:{flag:!1},del:{flag:!1},edt:{flag:!1},cancel:{flag:!1},exc:{flag:!1,url:""}}},e}return Object(a.__extends)(e,t),e.prototype.ngOnInit=function(){},e}(function(){function t(){}return t.prototype.getNgGrid=function(t){this.ngGrid=t},t.prototype.processNgGrid=function(t){this[t.methodName](t.gridId,t.rowData,t.extend)},t}()),p=i["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function u(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,10,"div",[["class","row"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\n  "])),(t()(),i["\u0275eld"](2,0,null,null,7,"div",[["class","col-sm-12 col-md-12"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\n    "])),(t()(),i["\u0275eld"](4,0,null,null,4,"div",[["class","card card-body card-widget"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,["\n      "])),(t()(),i["\u0275eld"](6,16777216,null,null,1,"div",[["appGrid",""],["id","test-grid"],["style","width: 100%"]],null,[[null,"getNgGrid"],[null,"clickGrid"],[null,"click"]],function(t,e,n){var r=!0,d=t.component;return"click"===e&&(r=!1!==i["\u0275nov"](t,7).toggleOpen(n)&&r),"getNgGrid"===e&&(r=!1!==d.getNgGrid(n)&&r),"clickGrid"===e&&(r=!1!==d.processNgGrid(n)&&r),r},null,null)),i["\u0275did"](7,81920,null,0,s,[i.ElementRef,i.ViewContainerRef,g],{gridSetting:[0,"gridSetting"]},{getNgGrid:"getNgGrid",clickGrid:"clickGrid"}),(t()(),i["\u0275ted"](-1,null,["\n    "])),(t()(),i["\u0275ted"](-1,null,["\n  "])),(t()(),i["\u0275ted"](-1,null,["\n"])),(t()(),i["\u0275ted"](-1,null,["\n"]))],function(t,e){t(e,7,0,e.component.gridSetting)},null)}var h=i["\u0275ccf"]("app-user-manage",c,function(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-user-manage",[],null,null,null,u,p)),i["\u0275did"](1,114688,null,0,c,[],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),f=n("Xjw4"),m=function(){},G=n("bfOx");n.d(e,"UsersModuleNgFactory",function(){return v});var v=i["\u0275cmf"](r,[],function(t){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[h]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,f.NgLocalization,f.NgLocaleLocalization,[i.LOCALE_ID,[2,f["\u0275a"]]]),i["\u0275mpd"](4608,g,g,[l.c]),i["\u0275mpd"](512,f.CommonModule,f.CommonModule,[]),i["\u0275mpd"](512,m,m,[]),i["\u0275mpd"](512,G.r,G.r,[[2,G.w],[2,G.o]]),i["\u0275mpd"](512,r,r,[]),i["\u0275mpd"](1024,G.m,function(){return[[{path:"",children:[{path:"user-manage",component:c,data:{heading:"\u7528\u6237\u7ba1\u7406"}}]}]]},[])])})}});